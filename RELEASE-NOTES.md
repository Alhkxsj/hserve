# hserve v1.2.4 发布说明

## 🚀 新功能

### 自动证书生成
- **安装时自动创建证书**：deb 包安装时会自动运行 `hserve cert` 生成证书，无需手动操作
- **一键安装体验**：安装完成后即可直接使用，无需额外的证书生成步骤

### 智能版本更新
- **自动清理旧版本**：安装新版本时自动删除旧的证书目录和证书文件
- **无缝升级**：确保新旧版本之间的平滑过渡

## 🔧 功能优化

### 简化的命令结构
- 只保留核心子命令：`serve` 和 `cert`
- 移除了冗余的命令别名，使程序更简洁

### 目录结构优化
- 按照 Go 标准项目布局重新组织代码
- 服务器代码从 `/internal/server` 移动到 `/internal/app/hserve`
- 添加了 `/scripts` 和 `/examples` 标准目录

### 增强的安装体验
- 安装脚本改进，提供更清晰的使用说明
- 新增提示信息，指导用户完成必要的配置

## 📦 构建与发布

### 改进的构建系统
- 更新 Makefile 以适应新的目录结构
- 优化构建流程，确保跨平台兼容性
- 改进 deb 包构建流程

### 完整的工具链
- 单一可执行文件：合并了之前的 hserve 和 hserve-certgen
- 更高效的代码组织：内部代码按功能模块化

## 📋 使用方法

### 安装
```bash
# 构建 deb 包
make deb

# 安装
dpkg -i dist/hserve_1.2.4_aarch64.deb
```

### 基本使用
```bash
# 启动服务器（默认端口 8443）
hserve

# 或使用子命令
hserve serve

# 查看帮助
hserve help
```

## 🎯 主要改进

1. **简化安装流程**：新安装包会在安装时自动生成证书
2. **自动清理**：升级时自动清理旧版本文件
3. **统一入口**：所有功能通过单一 hserve 命令访问
4. **优化结构**：代码结构更符合 Go 项目标准
5. **提升体验**：减少用户手动操作步骤

## 🐞 修复

- 修复了多处命令冗余问题
- 优化了错误提示和用户引导信息
- 改进了证书生成和验证流程

## 🙏 致谢

感谢所有用户提供的宝贵反馈，这些改进很大程度上基于用户的需求和建议。